webpackJsonp([8],{C1Tq:function(t,e){},afzy:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("BO1k"),o=a.n(i),n={data:function(){return{kinds:[],kinds_items:[],flag_index:1,centerDialogVisible:!1,deleteId:"",currentPage1:1,total:0,chooseId:"",chooseIndex:""}},methods:{handleSizeChange:function(t){},handleCurrentChange:function(t){var e,a=this;console.log("当前页: "+t),e=1==t?0:20*(t-1),this.kinds_items=[],this.flag_index=this.chooseIndex+1,localStorage.setItem("category_index",this.flag_index-1),this.$axios.get("/product/product_category/"+this.chooseId+"/",{params:{login_token:localStorage.getItem("token"),limit:20,offset:e}}).then(function(t){if(0==t.data.status){0==t.data.category_detail.product_list.length&&a.$notify({title:"提示",message:"您需要为此分类上传商品信息",offset:0,duration:1500}),a.total=t.data.category_detail.meta.total_count;var e=!0,i=!1,n=void 0;try{for(var s,r=o()(t.data.category_detail.product_list);!(e=(s=r.next()).done);e=!0){var l=s.value;a.kinds_items.push(l)}}catch(t){i=!0,n=t}finally{try{!e&&r.return&&r.return()}finally{if(i)throw n}}}else a.$notify({title:"错误",message:t.data.msg,offset:0,duration:1500})}).catch(function(t){this.$notify({title:"错误",message:"服务器繁忙",offset:0,duration:1500})})},setting:function(t){this.$router.push({path:"/changegood",query:{id:t}})},deleteConfirm:function(){var t=this;this.$axios.delete("/product/product_info/"+this.deleteId+"/",{params:{login_token:localStorage.getItem("token")}}).then(function(e){0==e.data.status?(t.$notify({title:"提示",message:"删除成功",offset:0,duration:1500}),t.centerDialogVisible=!1,t.kinds_items=[],t.$axios.get("/product/product_category/"+t.kinds[t.flag_index-1].id+"/",{params:{login_token:localStorage.getItem("token")}}).then(function(e){if(0==e.data.status){0==e.data.category_detail.product_list.length&&t.$notify({title:"提示",message:"您需要为此分类上传商品信息",offset:0,duration:1500});var a=!0,i=!1,n=void 0;try{for(var s,r=o()(e.data.category_detail.product_list);!(a=(s=r.next()).done);a=!0){var l=s.value;t.kinds_items.push(l)}}catch(t){i=!0,n=t}finally{try{!a&&r.return&&r.return()}finally{if(i)throw n}}}else t.$notify({title:"错误",message:e.data.msg,offset:0,duration:1500})}).catch(function(t){this.$notify({title:"错误",message:"服务器繁忙",offset:0,duration:1500})})):t.$notify({title:"错误",message:e.data.msg,offset:0,duration:1500})}).catch(function(t){this.$notify({title:"错误",message:"服务器繁忙",offset:0,duration:1500})})},setting_delete:function(t){this.centerDialogVisible=!0,this.deleteId=t},addNew:function(){this.$router.push({path:"/newgood",query:{id:this.kinds[this.flag_index-1].id}})},setKinds:function(){this.$router.push("/newkind")},details:function(t,e){var a=this;this.chooseId=t,this.chooseIndex=e,this.currentPage1=1,this.kinds_items=[],this.flag_index=e+1,localStorage.setItem("category_index",this.flag_index-1),this.$axios.get("/product/product_category/"+t+"/",{params:{login_token:localStorage.getItem("token")}}).then(function(t){if(console.log(t),0==t.data.status){0==t.data.category_detail.product_list.length&&a.$notify({title:"提示",message:"您需要为此分类上传商品信息",offset:0,duration:1500}),a.total=t.data.category_detail.meta.total_count;var e=!0,i=!1,n=void 0;try{for(var s,r=o()(t.data.category_detail.product_list);!(e=(s=r.next()).done);e=!0){var l=s.value;a.kinds_items.push(l)}}catch(t){i=!0,n=t}finally{try{!e&&r.return&&r.return()}finally{if(i)throw n}}}else a.$notify({title:"错误",message:t.data.msg,offset:0,duration:1500})}).catch(function(t){this.$notify({title:"错误",message:"服务器繁忙",offset:0,duration:1500})})}},mounted:function(){var t=this;this.$axios.get("/product/product_category/",{params:{login_token:localStorage.getItem("token")}}).then(function(e){if(console.log(e),0==e.data.status){if(0==e.data.category_list.length)return void t.$notify({title:"提示",message:"请先设置您的分类",offset:0,duration:2500});t.chooseId=e.data.category_list[0].id;var a=!0,i=!1,n=void 0;try{for(var s,r=o()(e.data.category_list);!(a=(s=r.next()).done);a=!0){var l=s.value;t.kinds.push(l)}}catch(t){i=!0,n=t}finally{try{!a&&r.return&&r.return()}finally{if(i)throw n}}if(localStorage.getItem("category_index")){var d=e.data.category_list[localStorage.getItem("category_index")].id;t.flag_index=Number(localStorage.getItem("category_index"))+1}else d=e.data.category_list[0].id;t.$axios.get("/product/product_category/"+d+"/",{params:{login_token:localStorage.getItem("token")}}).then(function(e){if(0==e.data.status){t.total=e.data.category_detail.meta.total_count;var a=!0,i=!1,n=void 0;try{for(var s,r=o()(e.data.category_detail.product_list);!(a=(s=r.next()).done);a=!0){var l=s.value;t.kinds_items.push(l)}}catch(t){i=!0,n=t}finally{try{!a&&r.return&&r.return()}finally{if(i)throw n}}}else t.$notify({title:"错误",message:e.data.msg,offset:0,duration:1500})}).catch(function(t){this.$notify({title:"错误",message:"服务器繁忙",offset:0,duration:1500})})}else t.$notify({title:"错误",message:e.data.msg,offset:0,duration:1500})}).catch(function(t){this.$notify({title:"错误",message:"服务器繁忙",offset:0,duration:1500})})}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("keep-alive",[a("div",{staticClass:"contain"},[a("div",{staticClass:"title"},[a("div",{staticClass:"kind"},t._l(t.kinds,function(e,i){return a("span",{key:i,class:t.flag_index==i+1?"flag":"",on:{click:function(a){t.details(e.id,i)}}},[t._v(t._s(e.name))])}),0),t._v(" "),a("div",[a("el-button",{staticStyle:{"margin-right":"30px"},attrs:{type:"info"},on:{click:function(e){t.setKinds()}}},[t._v("设置我的分类")])],1)]),t._v(" "),a("div",{staticStyle:{margin:"10px 0 0 20px"}},[t.kinds[0]?a("el-button",{attrs:{type:"info"},on:{click:function(e){t.addNew()}}},[t._v("新增此分类商品")]):t._e()],1),t._v(" "),a("div",{staticClass:"item"},t._l(t.kinds_items,function(e,i){return a("div",{key:i,staticClass:"items"},[a("div",{staticClass:"top"},[a("img",{attrs:{src:e.cover,alt:""}})]),t._v(" "),a("div",{staticClass:"btns"},[a("span",{on:{click:function(a){t.setting(e.id)}}},[t._v("设置")]),t._v(" "),a("span",{on:{click:function(a){t.setting_delete(e.id)}}},[t._v("删除")])])])}),0),t._v(" "),a("div",{staticStyle:{"padding-left":"20px"}},[a("el-pagination",{attrs:{"current-page":t.currentPage1,"page-size":20,layout:"total, prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage1=e}}})],1),t._v(" "),a("el-dialog",{attrs:{title:"提示",visible:t.centerDialogVisible,width:"30%",center:""},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[a("span",[t._v("确认删除此商品?")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.centerDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.deleteConfirm}},[t._v("确 定")])],1)])],1)])},staticRenderFns:[]};var r=a("VU/8")(n,s,!1,function(t){a("C1Tq")},"data-v-37ce0f60",null);e.default=r.exports}});